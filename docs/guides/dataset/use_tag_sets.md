---
sidebar_position: 6
slug: /use_tag_sets
sidebar_custom_props: {
  categoryIcon: LucideTags
}
---
# 使用标签集

使用标签集为数据集中的数据块自动打标签。

---

检索准确性是生产就绪的 RAG 框架的试金石。除了自动关键词、自动问题和知识图谱等检索增强方法外，RAGFlow 还引入了自动标签功能来解决语义鸿沟问题。自动标签功能基于用户定义的标签集，根据与每个数据块的相似度，自动将标签集中的标签映射到数据集中的相关数据块。这种自动化机制允许您为现有数据集应用额外的"层"的领域特定知识，这在处理大量数据块时特别有用。

要使用此功能，请确保您至少有一个正确配置的标签集，在数据集的**配置**页面上指定标签集，然后重新解析文档以启动自动标签过程。在此过程中，数据集中的每个数据块将与指定标签集中的每个条目进行比较，并根据相似度自动应用标签。

## 应用场景

自动标签适用于数据块彼此非常相似，无法将目标数据块与其他数据块区分开的情况。例如，当您有一些关于 iPhone 的数据块，而大多数数据块是关于 iPhone 手机壳或 iPhone 配件时，如果没有额外信息，就很难检索到关于 iPhone 的数据块。

## 1. 创建标签集

您可以将标签集视为一个封闭集，附加到数据集中数据块的标签*仅*来自指定的标签集。您使用标签集来"通知" RAGFlow 要标记哪些数据块以及应用哪些标签。

### 准备标签表文件

标签集可以包含一个或多个 XLSX、CSV 或 TXT 格式的表格文件。标签集中的每个表格文件包含两列，**描述**和**标签**：

- 第一列提供第二列中列出的标签的描述。这些描述可以是示例数据块或示例查询。将计算此列中的每个条目与数据集中每个数据块之间的相似度。
- **标签**列包含与描述条目配对的标签。多个标签应使用逗号（,）分隔。

:::tip 注意
作为经验法则，请考虑在标签表中包含以下条目：

- 目标数据块的描述及其对应的标签。
- 使用其他方法无法检索到正确响应的用户查询，确保其标签与数据集中的目标数据块匹配。
:::

### 创建标签集

:::danger 重要
标签集*不*参与文档索引或检索。在配置聊天助手或智能体时，请勿指定标签集。
:::

1. 点击 **+ 创建数据集** 创建数据集。
2. 导航到已创建数据集的**配置**页面，在**摄入流水线**中选择**内置**，然后从**内置**下拉菜单中选择**标签**作为默认分块方法。
3. 返回**文件**页面，上传并解析 XLSX、CSV 或 TXT 格式的表格文件。
   _**标签视图**部分下会出现一个标签云，表示标签集已创建：_
   ![Image](https://github.com/user-attachments/assets/abefbcbf-c130-4abe-95e1-267b0d2a0505)
4. 点击**表格**选项卡查看标签频率表：
   ![Image](https://github.com/user-attachments/assets/af91d10c-5ea5-491f-ab21-3803d5ebf59f)

## 2. 为数据块打标签

创建标签集后，您可以将其应用于数据集：

1. 导航到数据集的**配置**页面。
2. 从**标签集**下拉列表中选择标签集，然后点击**保存**确认。

   :::tip 注意
   如果标签集在下拉列表中缺失，请检查其是否已正确创建或配置。
   :::

3. 重新解析文档以启动自动标签过程。
   _在使用自动标签数据集的 AI 聊天场景中，每个查询将使用相应的标签集进行标记，带有这些标签的数据块将有更高的机会被检索。_

## 3. 更新标签集

创建标签集*不是*一劳永逸的。通常，您可能会发现有必要更新或删除现有标签或添加新条目。

- 您可以在标签频率表中更新现有标签集。
- 要添加新条目，您可以添加并解析 XLSX、CSV 或 TXT 格式的新表格文件。

### 在标签频率表中更新标签集

1. 导航到标签集的**配置**页面。
2. 点击**标签视图**下的**表格**选项卡查看标签频率表，您可以在其中更新标签名称或删除标签。

:::danger 重要
当标签集更新时，您必须重新解析数据集中的文档，以便相应地更新其标签。
:::

### 添加新表格文件

1. 导航到标签集的**配置**页面。
2. 导航到**数据集**页面，上传并解析 XLSX、CSV 或 TXT 格式的表格文件。

:::danger 重要
如果向标签集添加新表格文件，是否重新解析数据集中的文档由您自行决定。
:::

## 常见问题

### 我可以引用多个标签集吗？

可以。通常一个标签集就足够了。使用多个标签集时，请确保它们彼此独立；否则，请考虑合并您的标签集。

### 标签集和标准数据集有什么区别？

标准数据集就是数据集。它将被 RAGFlow 的文档引擎搜索，检索到的数据块将提供给 LLM。相比之下，标签集仅用于将标签附加到数据集中的数据块。它不直接参与检索过程，在为聊天助手或智能体选择数据集时不应选择标签集。

### 自动标签和自动关键词有什么区别？

这两个功能都增强了 RAGFlow 的检索。自动关键词功能依赖于 LLM 并消耗大量令牌，而自动标签功能基于向量相似度和预定义的标签集。您可以将自动关键词功能中应用的关键词视为一个开放集，因为它们是由 LLM 生成的。相比之下，标签集可以被视为用户定义的封闭集，在使用前需要上传指定格式的标签集。
