---
sidebar_position: 1
slug: /use_memory
sidebar_custom_props: {
  categoryIcon: LucideMonitorCog
}
---

# 使用记忆

RAGFlow 的记忆模块旨在保存所有内容，包括智能体工作时的对话。它保存对话的原始日志，比如用户说的话和 AI 回复的话。它还保存聊天过程中生成的额外信息，比如 AI 对交互的摘要或注释。它的主要工作是使对话之间流畅衔接，让 AI 记住关于用户的个人详细信息，并让 AI 从所有过去的对话中学习。

这个模块不仅仅是存储原始数据。它足够智能，可以将信息分类为不同有用的类型。它可以提取关键事实和含义（语义记忆），记住过去聊天中的特定事件和故事（情景记忆），并保留当前任务所需的详细信息（工作记忆）。这使简单的日志变成了有组织的经验库。

因此，用户可以轻松地将任何保存的信息带回新的对话中。这个过去的上下文有助于 AI 保持主题，避免重复自己，使聊天感觉更加连贯和自然。更重要的是，它为 AI 提供了可靠的历史基础，使其答案更加准确和有用。

## 创建记忆

记忆模块为所有记忆提供简化的集中管理。

创建记忆时，用户可以精确定义要提取的信息类型，帮助确保仅捕获和整理相关数据。从导航路径概览 >> 记忆，用户可以执行关键管理操作，包括重命名记忆、组织记忆以及与团队成员共享记忆以支持协作工作流程。


![](https://raw.githubusercontent.com/infiniflow/ragflow-docs/main/images/memory_interface.PNG)

## 配置记忆

在**记忆**页面上，点击预期的记忆 **>** **配置**以查看和更新其设置。

### 名称

创建的记忆的唯一名称。

### 嵌入模型

用于将记忆转换为嵌入的嵌入模型。

### LLM

用于从记忆中提取知识的聊天模型。

### 记忆类型

记忆中存储的内容：

`原始`：用户与智能体之间的原始对话（默认必需）。
`语义记忆`：关于用户和世界的一般知识和事实。
`情景记忆`：特定事件和体验的带时间戳的记录。
`程序记忆`：学到的技能、习惯和自动化过程。

### 记忆大小

为记忆及其相应嵌入分配的默认容量（以字节为单位）。默认为 `5242880`（5MB）。

:::tip 注意
一条带有 1024 维嵌入的 1KB 消息大约占用 9KB 的内存（1KB + 1024 x 8 字节 = 9KB）。在默认限制 5MB 的情况下，系统可以存储大约 500 条这样的消息。
:::

### 权限

- **仅我**：仅限用户本人。
- **团队**：与团队成员共享此记忆。


## 管理记忆

在单个记忆页面内，您可以微调保存的条目在智能体调用期间的使用方式。可以选择性地启用或禁用每个条目，允许您控制哪些信息保持活动状态而无需永久删除任何内容。

当某些细节不再相关时，您还可以选择完全忘记特定的记忆条目。这使记忆保持清洁、专注，并易于随着时间的推移维护，确保智能体仅依赖于最新和有用的信息。

![](https://raw.githubusercontent.com/infiniflow/ragflow-docs/main/images/memory_interface.PNG)

手动遗忘的记忆条目完全从智能体调用返回的结果中排除，确保它们不再影响下游行为。这有助于保持响应专注于最相关和有意保留的信息。

当记忆达到其存储限制并应用自动遗忘策略时，之前手动遗忘的条目也将优先被删除。这允许系统更智能地回收容量，同时尊重用户早期的策划决策。

## 增强 Agent 上下文

在[检索](../agent/agent_component_reference/retrieval.mdx)和[消息](../agent/agent_component_reference/message.mdx)组件设置下，提供了一种新的记忆调用功能。在消息组件中，用户可以配置智能体将选定的数据写入指定的记忆，而检索组件可以设置为从同一记忆中读取以回答未来的查询。这使得简单的问答机器人智能体能够随着时间积累上下文，并用更丰富的、具有记忆意识的答案进行响应。

### 从记忆中检索

对于任何使用记忆的智能体配置，都需要**检索**组件来将存储的信息带回对话中。通过在支持记忆的组件中包含检索，智能体可以在需要时始终召回和应用相关的过去数据。

![](https://raw.githubusercontent.com/infiniflow/ragflow-docs/main/images/retrieve_from_memory.PNG)

### 保存到记忆

完成**检索**组件设置后，在**保存到记忆**下的**消息**组件中选择相应的记忆：


![](https://raw.githubusercontent.com/infiniflow/ragflow-docs/main/images/save_to_memory.png)


## 常见问题

### 我可以共享我的记忆吗？

可以。您的记忆可以在智能体之间共享。请参阅以下主题：

- [创建记忆](#创建记忆)
- [增强 Agent 上下文](#增强-agent-上下文)

如果您希望与团队成员共享您的记忆，请确保您已配置其团队权限。有关详情，请参阅[共享记忆](../team/share_memory.md)。

