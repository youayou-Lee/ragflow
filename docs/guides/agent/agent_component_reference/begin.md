---
sidebar_position: 1
slug: /begin_component
sidebar_custom_props: {
  categoryIcon: LucideHome
}
---
# 开始组件

工作流中的起始组件。

---

**开始**组件设置开场问候或接受来自用户的输入。当您创建智能体时，无论是从模板还是从头开始（从空白模板），它都会自动填充到画布上。工作流中应该只有一个**开始**组件。

## 场景

**开始**组件在所有情况下都是必不可少的。每个智能体都包括一个**开始**组件，该组件不能被删除。

## 配置

单击组件以显示其**配置**窗口。在这里，您可以设置开场问候和智能体的输入参数（全局变量）。

### 模式

模式定义如何触发工作流。

- **对话式**：智能体从对话中触发。
- **任务**：智能体在没有对话的情况下启动。
- **Webhook**：通过webhook接收外部HTTP请求，实现自动触发和工作流启动。
  *选择后，会为当前智能体生成唯一的Webhook URL。*

![](https://raw.githubusercontent.com/infiniflow/ragflow-docs/main/images/webhook_mode.png)

### 方法

支持的HTTP方法。仅在将**Webhook**选择为**模式**时可用。

### 安全性

要选择的身份验证方法，仅在将**Webhook**选择为**模式**时可用。包括：

- **token**：基于令牌的身份验证。
- **basic**：基本身份验证。
- **jwt**：JWT身份验证。

### 模式

模式定义系统在**Webhook**模式下接收的HTTP请求的数据结构。其配置包括：

- 内容类型：
  - `application/json`
  - `multipart/form-data`
  - `application/x-www-form-urlencoded`
  - `text-plain`
  - `application/octet-stream`
- 查询参数
- 标头参数
- 请求正文参数

### 响应

仅在将**Webhook**选择为**模式**时可用。

工作流的响应模式，即工作流如何响应外部HTTP请求。支持的选项：

- **接受响应**：当验证HTTP请求时，立即返回成功响应，工作流在后台异步运行。
  - 选择后，您在**开始**组件中配置相应的HTTP状态码和消息。
  - 返回的HTTP状态码在`200-399`范围内。
- **最终响应**：系统仅在整个工作流完成后返回最终处理结果。
  - 选择后，您在[消息](./message.md)组件中配置相应的HTTP状态码和消息。
  - 返回的HTTP状态码在`200-399`范围内。

### 开场问候

**仅对话模式。**

对话模式中的智能体以开场问候开始。它是智能体在对话模式下对用户的第一条消息，可以是欢迎语或引导用户前进的说明。

### 全局变量

您可以在**开始**组件中定义全局变量，这些变量可以是必需的或可选的。一旦设置，用户在与智能体交互时需要为这些变量提供值。单击**+添加变量**以添加全局变量，每个变量具有以下属性：

- **名称**：_必需_
  提供有关变量的其他详细信息的描述性名称。
- **类型**：_必需_
  变量的类型：
  - **单行文本**：接受不带换行符的单行文本。
  - **段落文本**：接受多行文本，包括换行符。
  - **下拉选项**：要求用户从下拉菜单中为此变量选择一个值。您需要为下拉菜单设置_至少_一个选项。
  - **文件上传**：要求用户上传一个或多个文件。
  - **数字**：接受一个数字作为输入。
  - **布尔值**：要求用户在打开和关闭之间切换。
- **键**：_必需_
  唯一的变量名称。
- **可选**：一个切换开关，指示变量是否可选。

:::tip 注意
要从客户端传入参数，请调用：

- HTTP方法[与智能体对话](../../../references/http_api_reference.md#converse-with-agent)，或
- Python方法[与智能体对话](../../../references/python_api_reference.md#converse-with-agent)。
  :::

:::danger 重要
如果您将键类型设置为**文件**，请确保上传文件的令牌数不超过您的模型提供商的最大令牌限制；否则，文件中的纯文本将被截断且不完整。
:::

:::note
您可以通过设置环境变量`DOC_BULK_SIZE`和`EMBEDDING_BATCH_SIZE`来调整文档解析和嵌入效率。
:::

## 常见问题

### 上传的文件在数据集中吗？

不。作为输入上传到智能体的文件不会存储在数据集中，因此不会使用RAGFlow内置的OCR、DLR或TSR模型进行处理，也不会使用RAGFlow内置的分块方法进行分块。

### 上传文件的文件大小限制

上传到智能体的文件没有_特定_的文件大小限制。但是请注意，模型提供商通常具有默认或明确的最大令牌设置，范围可能从8196到128k：上传文件的纯文本部分将作为键值传入，但如果文件的令牌数超过此限制，字符串将被截断且不完整。

:::tip 注意
`/docker/.env`中的变量`MAX_CONTENT_LENGTH`和`/docker/nginx/nginx.conf`中的`client_max_body_size`设置每次上传到数据集或RAGFlow文件系统的文件大小限制。这些设置在此场景中不适用。
:::
